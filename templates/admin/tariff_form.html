{% extends "base.html" %}

{% block title %}{% if tariff %}Редактировать тариф{% else %}Создать тариф{% endif %}{% endblock %}

{% block content %}
<div class="container">
    <div class="card">
        <div class="card-header">
            <h1 class="card-title">{% if tariff %}Редактировать тариф{% else %}Создать новый тариф{% endif %}</h1>
        </div>

        <form method="POST" action="{% if tariff %}/admin/tariffs/{{ tariff.id }}/edit{% else %}/admin/tariffs/create{% endif %}">
            <div class="form-group">
                <label for="name">Название тарифа *</label>
                <input
                    type="text"
                    id="name"
                    name="name"
                    required
                    placeholder="например, Старт, Баланс, Энергия"
                    value="{{ tariff.name if tariff else '' }}"
                >
            </div>

            <div class="form-group">
                <label for="description">Описание</label>
                <textarea
                    id="description"
                    name="description"
                    placeholder="Опишите особенности данного тарифа..."
                >{{ tariff.description if tariff else '' }}</textarea>
            </div>

            <div class="form-group">
                <label for="calories">Калории в день</label>
                <input
                    type="number"
                    id="calories"
                    name="calories"
                    placeholder="например, 1500"
                    min="0"
                    value="{{ tariff.calories if tariff and tariff.calories else '' }}"
                >
            </div>

            <div class="form-group">
                <label for="base_price">Цена (в центах) *</label>
                <input
                    type="number"
                    id="base_price"
                    name="base_price"
                    required
                    placeholder="например, 2990 для $29.90"
                    min="1"
                    value="{{ tariff.base_price if tariff else '' }}"
                >
                <small style="display: block; margin-top: 8px; color: var(--text-secondary);">
                    Введите цену в центах (например, 2990 = $29.90)
                </small>
            </div>

            <div class="form-group">
                <label>Особенности</label>
                <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                    <input
                        type="text"
                        id="feature-input"
                        placeholder="Введите особенность и нажмите Enter"
                        style="flex: 1;"
                    >
                    <button type="button" onclick="addFeature()" class="btn btn-secondary">Добавить</button>
                </div>
                <div id="features-container" class="feature-tags">
                    {% if tariff and tariff.features %}
                        {% for feature in tariff.features %}
                        <div class="feature-tag">
                            <span>{{ feature }}</span>
                            <button type="button" onclick="removeFeature(this)">×</button>
                            <input type="hidden" name="features" value="{{ feature }}">
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>

            <div style="display: flex; gap: 12px; margin-top: 32px;">
                <button type="submit" class="btn btn-primary">
                    {% if tariff %}Обновить тариф{% else %}Создать тариф{% endif %}
                </button>
                <a href="/admin/tariffs" class="btn btn-secondary">Отмена</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
