{% extends "base.html" %}

{% block title %}{{ tariff.name }} - –§–∞–π–ª—ã{% endblock %}

{% block content %}
<div class="container">
    <div class="card">
        <div class="card-header">
            <div>
                <h1 class="card-title">{{ tariff.name }}</h1>
                <p style="color: var(--text-secondary); margin-top: 4px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PDF —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞</p>
            </div>
            <a href="/admin/tariffs" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Ç–∞—Ä–∏—Ñ–∞–º</a>
        </div>

        <!-- Upload Form -->
        <div style="margin-bottom: 32px;">
            <h3 style="font-size: 18px; margin-bottom: 16px;">–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª</h3>
            <form method="POST" action="/admin/tariffs/{{ tariff.id }}/files/upload" enctype="multipart/form-data">
                <div class="file-upload" onclick="document.getElementById('file-input').click()">
                    <input
                        type="file"
                        id="file-input"
                        name="file"
                        accept="application/pdf"
                        required
                        onchange="handleFileUpload(this)"
                    >
                    <div class="upload-icon">üìÑ</div>
                    <div class="upload-text">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ PDF</div>
                    <div class="upload-hint">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10 –ú–ë</div>
                </div>
                <div id="file-preview" style="margin-top: 16px;"></div>
                <button type="submit" class="btn btn-primary" style="margin-top: 16px;">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>
            </form>
        </div>

        <!-- Files List -->
        {% if files %}
        <h3 style="font-size: 18px; margin-bottom: 16px;">–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã ({{ files|length }})</h3>
        <ul class="file-list">
            {% for file in files %}
            <li class="file-item">
                <div class="file-info">
                    <span class="file-icon">üìÑ</span>
                    <div>
                        <div class="file-name">{{ file.filename }}</div>
                        <div class="file-size">{{ (file.file_size / 1024 / 1024) | round(2) }} –ú–ë ‚Ä¢ –ó–∞–≥—Ä—É–∂–µ–Ω {{ file.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
                    </div>
                </div>
                <form method="POST" action="/admin/files/{{ file.id }}/delete" style="display: inline;" onsubmit="return confirmDelete('–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª \'{{ file.filename }}\'?')">
                    <button type="submit" class="btn btn-danger" style="padding: 8px 16px; font-size: 13px;">–£–¥–∞–ª–∏—Ç—å</button>
                </form>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">üìÅ</div>
            <h3 class="empty-title">–§–∞–π–ª—ã –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã</h3>
            <p class="empty-text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF —Ñ–∞–π–ª—ã –¥–ª—è —ç—Ç–æ–≥–æ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
